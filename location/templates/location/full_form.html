{% extends "core/emlo_logined.html" %}
{% load static %}


{% block head %}
    <script src="{% static 'location/js/init_loc_form.js' %}" defer></script>
    <script src="{% static 'core/js/ref_publication_service.js' %}" defer></script>
    <script src="{% static 'core/js/table_of_content_service.js' %}" defer></script>
    <script defer>

        $(function () {
            setup_location_form_listener()
            setup_url_checker()
            setup_standtext([
                'GeoNames', 'TGN', 'Wikidata ID', 'Wikipeda',
            ]);
            setup_checkbox_position()
            setup_table_of_content();
        })
    </script>
{% endblock %}

{% block content %}
    <div class="form-core-div">
        <div class="form-col-left toc-host"></div>
        <div class="form-col-right">
            <h1 class="align-center" id="header_location">Location</h1>
            <form method="post" enctype="multipart/form-data">
                {% csrf_token %}
                {% include "core/component/form_descriptor.html" with descriptor=form_descriptor %}
                <fieldset>
                    <legend id="header_init_{{ forloop.counter0 }}" class="toc-item">
                        {{ loc_form.form_title__ }}
                    </legend>
                    {{ loc_form }}
                </fieldset>


                <!-- Comment section -->
                <h1 id="header_researcher_note">Researcher' notes for front-end display</h1>
                {% include "core/component/comment_publication_formset.html" with comment_formset=comment_formset %}


                <!-- Resource section -->
                <h1 id="header_resource">Related resource: </h1>
                {% include "core/component/resource_formset.html" with res_formset=res_formset %}

                <!-- Images section -->
                {% include "core/component/image_formset.html" with img_handler=img_handler %}

                {% include "core/component/actionbox.html" %}

            </form>
        </div>
    </div>
    <!-- KTODO delete record button  -->
{% endblock %}
