{% extends "core/emlo_logined.html" %}
{% load static %}


{% block head %}
    <script src="{% static 'location/js/init_loc_form.js' %}" defer></script>
    <script defer>
        document.addEventListener('DOMContentLoaded', (e)=>{
            setup_location_form_listener()
        });
    </script>
{% endblock %}

{% block content %}
    <form action="{% url 'location:full_form' loc_id %}" method="post">
        {% csrf_token %}
        <h1>Location </h1>
        <h1>Core fields and editors' notes:</h1>
        <table>
            {{ loc_form }}
        </table>


        <!-- Comment section -->
        <h1>Researcher' notes for front-end display</h1>
        {{ comment_formset.management_form }}
        {% for form in comment_formset %}
            <table>
                {{ form }}
            </table>
        {% endfor %}


        <!-- Resource section -->
        <h1>Related resource: </h1>
        {{ res_formset.management_form }}
        {% for form in res_formset %}
            <h2>
                {% if forloop.first %}
                    Add a new resource
                {% else %}
                    Resource no. {{ forloop.counter0 }}. {{ form.resource_name.value }}
                {% endif %}
            </h2>
            <table>
                {{ form }}
            </table>
        {% endfor %}



        <!--  KTODO Images  -->

        <input type="submit" value="Submit">
    </form>
{% endblock %}
